<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Lei&#39;s Blog: Add React Native to an existing Swift project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700' rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">-->
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/index.html">Lei&#39;s Blog</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/index.html">Home</a></li>
                <li
                ><a href="/archives.html">Archives</a></li>
                
                <!-- <li><a href="/feed.xml">RSS</a></li>-->
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">January 17, 2016</div>
        
    </div>
    <h2>Add React Native to an existing Swift project</h2>
</div>
<div>
    
    <p>TL;DR Demo project source code can be found from <a href='https://github.com/tendant/ReactNativeSwiftDemo'>Github</a></p><p>After hearing a lot good things about ReactNative recently, I finally got some time to play with ReactNative during last holiday season.</p><p>A little background about our iOS app, we started app around July 2015. By the time, ReactNative was just released with iOS support, and Swift 2.0 was just released in June. We built some prototypes to compare Swift with ReactNative, and decided to go with Swift. Since we are also building the web app using ReactJS, we have seen a lot benefit by using React way of building UI. However we already have a native app built with Swift, we want to try it with our existing app before committing to ReactNative. Hence I started to look at the way of introducing ReactNative.</p><p>A lot of steps came from <a href='https://gist.github.com/boopathi/27d21956fefcb5b168fe'>this gist</a>, the original gist content is a little bit outdated, and things have been changed since then. It is still good for reference. I also forked and updated the <a href='https://gist.github.com/tendant/6a1ea9e363f5ca4d73a1'>gist</a>.</p><p>Before start, make sure the ReactNative requirement is met. <a href='https://facebook.github.io/react-native/docs/getting-started.html#requirements'>ReactNative requirements</a></p><h3><a name="create&#95;a&#95;project&#95;in&#95;xcode&#95;with&#95;default&#95;setting."></a>Create a project in XCode with default setting.</h3><pre><code>iOS -&gt; Application -&gt; Single View Application
Language: Swift</code></pre><h3><a name="add&#95;reactnative&#95;dependency."></a>Add ReactNative dependency.</h3><ol><li>Create package.json file in project directory</li><li>add dependecy <code>&quot;react-native&quot;: &quot;&#94;0.17.0&quot;</code></li><li>run <code>npm install</code></li></ol><h3><a name="add&#95;reactnative&#95;project&#95;to&#95;linked&#95;framework&#95;and&#95;libraries."></a>Add ReactNative project to Linked Framework and Libraries.</h3><pre><code>General settings -&gt; Linked Framework and Library -&gt;
+ -&gt; Add Other... -&gt; chose node&#95;modules/react-native/React/React.xcodeproj</code></pre><h3><a name="add&#95;reactnative&#95;library&#95;in&#95;linked&#95;framework&#95;and&#95;libraries&#95;again."></a>Add ReactNative library in Linked Framework and Libraries again.</h3><pre><code>+ -&gt; libReact.a</code></pre><h3><a name="repeat&#95;previous&#95;two&#95;steps"></a>Repeat previous two steps</h3>Add and link other libraries from /node_modules/react-native/Libraries as needed.<p>Libraries I have added:<pre><code>libRCTActionSheet.a
libRCTGeolocation.a
libRCTImage.a
libRCTLinking.a
libRCTNetwork.a
libRCTSettings.a
libRCTText.a
libRCTVibration.a
libRCTWebSocket.a </code></pre><h3><a name="update&#95;build&#95;setting"></a>Update Build Setting</h3><pre><code>Linking -&gt; Other Linker Flags: Add `-all&#95;load`
Search Paths -&gt; Header Search Paths -&gt; &quot;node&#95;module/react-native/Libraries&quot; with `recursive`
Swift Compiler - Code Generation &gt; Objective-C Bridging Header
    &#42; Set to ProjectName/ProjectName-Bridging-Header.h, change ProjectName to actual name</code></pre><h3><a name="create&#95;bridging&#95;file"></a>Create bridging file</h3>Create a new header file <code>ProjectName/ProjectName-Bridging-Header.h</code></p><h3><a name="project&#95;can&#95;be&#95;built&#95;and&#95;run&#95;from&#95;xcode&#95;now"></a>Project can be built and run from XCode now</h3><ul><li>Try to run the code in simulator.</li><li>It should start a terminal window with running <code>packager</code>.</li><li>If everything works fine, it should show <code>React packager ready.</code> in terminal window.</li></ul><h3><a name="add&#95;reactnative&#95;javascript&#95;code"></a>Add ReactNative Javascript code</h3><ul><li>Create file index.ios.js and save to project root directory</li></ul><pre><code class="javascript">var React = require&#40;'react-native'&#41;;
var {
    AppRegistry,
    Text,
    View
} = React;

var App = module.exports = React.createClass&#40;{
    render&#40;&#41; {
        return &#40;
            &lt;View style={{flex: 1, alignItems: 'center', justifyContent: 'center', borderWidth: 2}}&gt;
                &lt;Text style={{alignSelf: 'center', alignItems: 'stretch', backgroundColor: 'green'}}&gt;Hello World!&lt;/Text&gt;
            &lt;/View&gt;
        &#41;
    }
}&#41;;
                                             
AppRegistry.registerComponent&#40;'ReactNativeSwiftDemo', &#40;&#41; =&gt; App&#41;;
</code></pre><p>Test packager by accessing below url:</p><pre><code>http://localhost:8081/index.ios.bundle?platform=ios&amp;dev=true</code></pre><h3><a name="add&#95;reactnative&#95;view&#95;into&#95;ios&#95;application"></a>Add ReactNative View into iOS Application</h3><ol><li>Add two class variables into AppDelegate.swift</li></ol><pre><code class="swift">    var rootView: RCTRootView
    let jsCodeLocation = NSURL&#40;string: &quot;http://localhost:8081/index.ios.bundle?platform=ios&amp;dev=true&quot;&#41;
</code></pre><ol><li>Add init() function in AppDelegate.swift<pre><code class="swift">    override init&#40;&#41; {
        // initialize the rootView to fetch JS from the dev server
        rootView = RCTRootView.init&#40;bundleURL: jsCodeLocation!, moduleName: &quot;ReactNativeSwiftDemo&quot;, initialProperties: nil, launchOptions: nil&#41;
        super.init&#40;&#41;
    }
</code></pre></li><li>Update application didFinishLaunchingWithOptions delegate function</li></ol><pre><code class="swift">    func application&#40;application: UIApplication, didFinishLaunchingWithOptions launchOptions: &#91;NSObject: AnyObject&#93;?&#41; -&gt; Bool {
        // Override point for customization after application launch.
        
        // Initialize a Controller to use view as React View
        let rootViewController = ViewController&#40;&#41;
        rootViewController.view = rootView
        
        // Set window to use rootViewController
        self.window = UIWindow&#40;frame: UIScreen.mainScreen&#40;&#41;.bounds&#41;
        self.window?.rootViewController = rootViewController
        self.window?.makeKeyAndVisible&#40;&#41;

        return true
    }
</code></pre><h3><a name="enable&#95;access&#95;to&#95;http://localhost"></a>Enable access to http://localhost</h3><ol><li>Open Info.plist</li><li>Add key "NSAppTransportSecurity" with "Dictionary" type</li><li>Add key "NSAllowsArbitraryLoads" with value "true" in "NSAppTransportSecurity"</li></ol><h3><a name="now&#95;you&#95;can&#95;try&#95;to&#95;build&#95;and&#95;run"></a>Now you can try to build and run</h3>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags/React Native.html">React Native</a>
    
    <a href="/tags/iOS.html">iOS</a>
    
    <a href="/tags/Swift.html">Swift</a>
    
</div>


    <div id="prev-next">
        
        
    </div>

    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/posts/2016-01-17-add-reactnative-in-swift-project.html">Add React Native to an existing Swift project</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/tags/React Native.html">React Native</a></li>
                        
                        <li><a href="/tags/iOS.html">iOS</a></li>
                        
                        <li><a href="/tags/Swift.html">Swift</a></li>
                        
                    </ul>
                </div>
                
                <div id="contact">
                    <h3>Contact</h3>
                    <ul>
                        <li>tendant (at) gmail</li>
                        <li><a href="https://twitter.com/tendant" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @tendant</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>
    <footer>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work by <a xmlns:cc="http://creativecommons.org/ns#" href="http://blog.leiwang.info" property="cc:attributionName" rel="cc:attributionURL">http://blog.leiwang.info</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-6332912-4', 'auto');
 ga('send', 'pageview');
</script>
</body>
</html>
